<!DOCTYPE html><html lang="zh-tw"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>AWS - S3 Versioning | 查斯特 Chester Tang</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="ruby on rails, web developer, JavaScript, full stack"><meta name="description" content="沒有半路出家，但像半路出家"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://chestertang.site/2020/03/27/zyx0327/index.html"><link rel="icon" type="image/png" href="/img/logo.png" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="查斯特部落格 | The Blog Of Chester Tang"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-155161238-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-155161238-1")</script><meta name="description" content="S3 VersioningUsing Versioning with S3 Stores all versions of an object. (including all writes and even if you delete an object) Great backup tool. Once enabled, Versioning cannot be disabled, only sus"><meta name="keywords" content="AWS,S3 Versioning"><meta property="og:type" content="article"><meta property="og:title" content="AWS - S3 Versioning"><meta property="og:url" content="http://chestertang.site/2020/03/27/zyx0327/"><meta property="og:site_name" content="查斯特部落格 | The Blog Of Chester Tang"><meta property="og:description" content="S3 VersioningUsing Versioning with S3 Stores all versions of an object. (including all writes and even if you delete an object) Great backup tool. Once enabled, Versioning cannot be disabled, only sus"><meta property="og:locale" content="zh-tw"><meta property="og:image" content="http://chestertang.site/img/zyx21.jpeg"><meta property="og:updated_time" content="2020-03-26T06:18:35.972Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="AWS - S3 Versioning"><meta name="twitter:description" content="S3 VersioningUsing Versioning with S3 Stores all versions of an object. (including all writes and even if you delete an object) Great backup tool. Once enabled, Versioning cannot be disabled, only sus"><meta name="twitter:image" content="http://chestertang.site/img/zyx21.jpeg"><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(undefined)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="查斯特部落格 | The Blog Of Chester Tang" alt="查斯特部落格 | The Blog Of Chester Tang"><img src="/img/logo.png" alt="查斯特部落格 | The Blog Of Chester Tang"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="Home" title="Home">Home</a></li><li class="nav__item"><a href="/archives" alt="Archive" title="Archive">Archive</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="/img/zyx21.jpeg" alt="AWS - S3 Versioning"></div><header class="post__info"><h1 class="post__title">AWS - S3 Versioning</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="https://github.com/BeastRush1231">查斯特</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2020-03-27</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/AWS/">AWS</a></li><li class="mark__item"><a href="/tags/S3-Versioning/">S3 Versioning</a></li></ul></div></div></header><div class="post__content"><h1 id="S3-Versioning"><a href="#S3-Versioning" class="headerlink" title="S3 Versioning"></a>S3 Versioning</h1><h2 id="Using-Versioning-with-S3"><a href="#Using-Versioning-with-S3" class="headerlink" title="Using Versioning with S3"></a>Using Versioning with S3</h2><ul><li>Stores all versions of an object. (including all writes and even if you delete an object)</li><li>Great backup tool.</li><li>Once enabled, Versioning cannot be disabled, only suspended.</li><li>Intergrate with Lifecycle rules.</li><li>Versioning’s MFA DELETE capability, which uses multi-factor authentication, can be used to provide an additional layer of security.</li></ul><h2 id="建立-S3-Bucket-Versioning"><a href="#建立-S3-Bucket-Versioning" class="headerlink" title="建立 S3 Bucket Versioning"></a>建立 S3 Bucket Versioning</h2><p>先建立一個新的 S3 Bucket，如果有遺忘的部分可以參考上篇 <a href="https://chestertang.site/2020/03/26/zyx0326/">AWS - S3 Bucket + Encryption</a> 的部分，可先設成 <code>Public</code>！</p><p><img src="https://i.imgur.com/hjqqtQx.png" alt="IMAGE"></p><p>再來上傳第一版本的檔案吧！（這邊以 txt 檔來做範例，記得也設定成 Public 才可以看到）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hi, chesterTang!</span><br><span class="line"></span><br><span class="line">This is version 1</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/IT1sJ83.png" alt="IMAGE"></p><p>完成基本的上傳與設定後，我們要來開啟 <code>Versioning</code> 的功能，點選 <code>Properties</code> 可以看到 <code>Versioning</code> 的框框，這時只要選取到 <code>Enable versioning</code> 並且 <code>Save</code> 就可以開啟。</p><p><img src="https://i.imgur.com/vJMujX2.png" alt="IMAGE"></p><p>將原本上傳的檔案把內容稍微更動一下並且再次上傳</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hi, chesterTang!</span><br><span class="line"></span><br><span class="line">!!! Oh !!! This is version 2 !!! Oh !!!</span><br></pre></td></tr></table></figure><p>或許剛剛上傳錯檔案想要刪除，結果就發現 Bucket 裡面的 files 都不見了？明明還有上個版本、上上個版本呀？</p><p><img src="https://i.imgur.com/9bxvWJz.png" alt="IMAGE"><br><img src="https://i.imgur.com/8ZsoWFZ.png" alt="IMAGE"></p><p>眼尖的你應該其實就已經發現兩個問題：</p><ol><li>在上述開啟 <code>Versioning</code> 的時候，S3 Bucket 裡面就有多出 <code>Versions Hide/Show</code> 的按鈕</li><li>更改內容再次上傳檔案後或者刪除，txt 檔案真的文字更動了，但是上個版本、上上個版本跑去哪裡了呢？</li></ol><blockquote><p>把 Versions Show 打開，就能看見到底做了什麼！</p></blockquote><p><img src="https://i.imgur.com/uEjjg9I.png" alt="IMAGE"></p><p>可以發現剛剛的刪除，其實不是真正的刪除，居然有一個版本是在做刪除這件事情把它蓋過去。</p><blockquote><p>所以這邊又衍生出了一個新議題，如果我真的想退回上個版本該怎麼做才能達成？</p></blockquote><p>必須在 <code>Versions Show</code> 的狀況下，做 <code>Actions</code> 才能達成退版本的效果，不然只是又新增另一個版本上去而已！</p><p><img src="https://i.imgur.com/6sXMAWz.png" alt="IMAGE"></p><h1 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h1><ul><li>Stores all versions of an object. (including all writes and even if you delete an object)</li><li>Once enabled, Versioning cannot be disabled, only suspended.</li><li>Intergrate with Lifecycle rules.</li><li>Versioning’s MFA DELETE capability, which uses multi-factor authentication, can be used to provide an additional layer of security.</li></ul><div class="post-announce">Thank you for reading, this article belongs to <a href="http://chestertang.site">查斯特部落格 | The Blog Of Chester Tang</a> copyright, if reproduced, please indicate the source：查斯特部落格 | The Blog Of Chester Tang（<a href="http://chestertang.site/2020/03/27/zyx0327/">http://chestertang.site/2020/03/27/zyx0327/</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2020/03/26/zyx0326/" title="AWS - S3 Bucket + Encryption"><i class="iconfont icon-prev"></i>AWS - S3 Bucket + Encryption</a></div><div class="post__prev post__prev--right"><a href="/2020/03/28/zyx0328/" title="AWS - S3 Lifecycle Management">AWS - S3 Lifecycle Management<i class="iconfont icon-next"></i></a></div></div></div></article><div id="disqus_thread"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">Introduction</h3><p class="block__text">沒有半路出家，但像半路出家</p></div><div class="sidebar__block"><h3 class="block__title">Categories</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/面試分享/">面試分享</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/環境架設macOS/">環境架設macOS</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Ruby/">Ruby</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Rails/">Rails</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Markup-Language/">Markup Language</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/JavaScript/">JavaScript</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/HTML5/">HTML5</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Docker/">Docker</a><span class="block-list-count">4</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/CodeWar/">CodeWar</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Amazon-Web-Services/">Amazon Web Services</a><span class="block-list-count">9</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/11th鐵人賽/">11th鐵人賽</a><span class="block-list-count">30</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">Latest Post</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2020/04/05/zyx0405/" title="S3 CloudFront Distribution"><div class="item__cover"><img src="/img/zyx25.jpeg" alt="S3 CloudFront Distribution"></div><div class="item__info"><h3 class="item__title">S3 CloudFront Distribution</h3><span class="item__text">2020-04-05</span></div></a></li><li class="latest-post-item"><a href="/2020/03/31/zyx0331/" title="S3 Cross Region Replication"><div class="item__cover"><img src="/img/zyx24.jpeg" alt="S3 Cross Region Replication"></div><div class="item__info"><h3 class="item__title">S3 Cross Region Replication</h3><span class="item__text">2020-03-31</span></div></a></li><li class="latest-post-item"><a href="/2020/03/30/zyx0330/" title="AWS - S3 Cross-Account Access"><div class="item__cover"><img src="/img/zyx23.jpeg" alt="AWS - S3 Cross-Account Access"></div><div class="item__info"><h3 class="item__title">AWS - S3 Cross-Account Access</h3><span class="item__text">2020-03-30</span></div></a></li><li class="latest-post-item"><a href="/2020/03/28/zyx0328/" title="AWS - S3 Lifecycle Management"><div class="item__cover"><img src="/img/zyx22.jpeg" alt="AWS - S3 Lifecycle Management"></div><div class="item__info"><h3 class="item__title">AWS - S3 Lifecycle Management</h3><span class="item__text">2020-03-28</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">Tags</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/11th鐵人賽/">11th鐵人賽</a></li><li class="tag-item"><a class="tag-link" href="/tags/2019-面試/">2019 面試</a></li><li class="tag-item"><a class="tag-link" href="/tags/6kyu/">6kyu</a></li><li class="tag-item"><a class="tag-link" href="/tags/AWS/">AWS</a></li><li class="tag-item"><a class="tag-link" href="/tags/Backend/">Backend</a></li><li class="tag-item"><a class="tag-link" href="/tags/Billing/">Billing</a></li><li class="tag-item"><a class="tag-link" href="/tags/CloudFront-Distribution/">CloudFront Distribution</a></li><li class="tag-item"><a class="tag-link" href="/tags/CodeWar/">CodeWar</a></li><li class="tag-item"><a class="tag-link" href="/tags/CoffeeScript/">CoffeeScript</a></li><li class="tag-item"><a class="tag-link" href="/tags/Docker/">Docker</a></li><li class="tag-item"><a class="tag-link" href="/tags/Frontend/">Frontend</a></li><li class="tag-item"><a class="tag-link" href="/tags/Fullstack/">Fullstack</a></li><li class="tag-item"><a class="tag-link" href="/tags/HTML5/">HTML5</a></li><li class="tag-item"><a class="tag-link" href="/tags/Haml/">Haml</a></li><li class="tag-item"><a class="tag-link" href="/tags/IAM/">IAM</a></li><li class="tag-item"><a class="tag-link" href="/tags/Iaas/">Iaas</a></li><li class="tag-item"><a class="tag-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-item"><a class="tag-link" href="/tags/Oh-my-zsh/">Oh-my-zsh</a></li><li class="tag-item"><a class="tag-link" href="/tags/Paas/">Paas</a></li><li class="tag-item"><a class="tag-link" href="/tags/Rails/">Rails</a></li><li class="tag-item"><a class="tag-link" href="/tags/React/">React</a></li><li class="tag-item"><a class="tag-link" href="/tags/Ruby/">Ruby</a></li><li class="tag-item"><a class="tag-link" href="/tags/Ruby-on-Rails/">Ruby on Rails</a></li><li class="tag-item"><a class="tag-link" href="/tags/S3-Bucket/">S3 Bucket</a></li><li class="tag-item"><a class="tag-link" href="/tags/S3-Cross-Region-Replication/">S3 Cross Region Replication</a></li><li class="tag-item"><a class="tag-link" href="/tags/S3-Cross-Account-Access/">S3 Cross-Account Access</a></li><li class="tag-item"><a class="tag-link" href="/tags/S3-Lifecycle-Management/">S3 Lifecycle Management</a></li><li class="tag-item"><a class="tag-link" href="/tags/S3-Versioning/">S3 Versioning</a></li><li class="tag-item"><a class="tag-link" href="/tags/Saas/">Saas</a></li><li class="tag-item"><a class="tag-link" href="/tags/css/">css</a></li><li class="tag-item"><a class="tag-link" href="/tags/eRuby/">eRuby</a></li><li class="tag-item"><a class="tag-link" href="/tags/erb/">erb</a></li><li class="tag-item"><a class="tag-link" href="/tags/gem/">gem</a></li><li class="tag-item"><a class="tag-link" href="/tags/html/">html</a></li><li class="tag-item"><a class="tag-link" href="/tags/iTrem2/">iTrem2</a></li><li class="tag-item"><a class="tag-link" href="/tags/javascript/">javascript</a></li><li class="tag-item"><a class="tag-link" href="/tags/macOS/">macOS</a></li><li class="tag-item"><a class="tag-link" href="/tags/note/">note</a></li><li class="tag-item"><a class="tag-link" href="/tags/rbenv/">rbenv</a></li><li class="tag-item"><a class="tag-link" href="/tags/rvm/">rvm</a></li><li class="tag-item"><a class="tag-link" href="/tags/zsh/">zsh</a></li><li class="tag-item"><a class="tag-link" href="/tags/前端新手村/">前端新手村</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© 2019 powered by <a href="https://github.com/BeastRush1231" target="_blank">Chester Tang</a></p><ul class="footer__social-network clearfix"></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script>var disqus_shortname="chestertang.site",disqus_config=function(){this.page.url="http://chestertang.site/2020/03/27/zyx0327/",this.page.identifier="/2020/03/27/zyx0327/",this.page.title="AWS - S3 Versioning"};!function(){var t=document,e=t.createElement("script");e.src="https://"+disqus_shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>